<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<h:body>
	<h:form>
		<p:growl id="growl" sticky="false" life="5000" showDetail="false"
			autoUpdate="true" />
		<nav
			class="main-header navbar navbar-expand navbar-white navbar-light"
			style="z-index: auto;">
		<ul class="navbar-nav">
			<li class="nav-item"><a class="nav-link" data-widget="pushmenu"
				href="#"><i class="fas fa-bars"></i></a></li>
			<li class="nav-item d-none d-sm-inline-block"><a
				href="index.xhtml" class="nav-link">Inicio</a></li>
		</ul>
		<!-- Right navbar links -->
		<ul class="navbar-nav ml-auto">
			<li class="nav-item dropdown"><a class="nav-link"
				data-toggle="dropdown" href="#"> <img style="height: 30px;"
					src="#{loginBean.foto}" class="img-circle elevation-2"
					alt="User Image" /> ${loginBean.fullName} (${loginBean.roleName})
			</a>
				<div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
					<a onclick="PF('dlgCambiarClave').show()" class="dropdown-item">
						<i class="fas fa-key mr-2"></i> Cambiar contraseña
					</a>
					<div class="dropdown-divider"></div>
					<a href="/logout" class="dropdown-item"> <i
						class="fas fa-sign-out-alt mr-2"></i> Cerrar sesión
					</a>
				</div></li>

			<li class="nav-item"><a class="nav-link"
				data-widget="fullscreen" href="#" role="button"> <i
					class="fas fa-expand-arrows-alt"></i>
			</a></li>

		</ul>
		</nav>

		<p:dialog header="Cambio de contraseña" widgetVar="dlgCambiarClave"
			minHeight="40" width="350" showEffect="fade" modal="true">
			<p class="p-m-0">
				<p:outputLabel for="txtPasswordActual" value="Contraseña Actual"
					class="form-label" />
				<p:inputText id="txtPasswordActual"
					value="#{cambiarClaveBean.passwordDto.oldPassword}"
					requiredMessage="Contraseña actual es obligatorio " required="true"
					type="password" />

			</p>
			<p class="p-m-0">
				<p:outputLabel for="txtPassword" value="Contraseña Nueva"
					class="form-label" />
				<p:password id="txtPassword" feedback="true"
					promptLabel="Contraseña nueva" weakLabel="Débil" goodLabel="Buena"
					strongLabel="Fuerte" autocomplete="new-password" required="true"
					requiredMessage="Contraseña nueva es obligatorio"
					value="#{cambiarClaveBean.passwordDto.newPassword}" />

			</p>
			<p class="p-m-0">
				<p:outputLabel for="txtPasswordRepite" value="Confirme contraseña"
					class="form-label" />
				<p:password id="txtPasswordRepite" feedback="true"
					promptLabel="Repita contraseña" weakLabel="Débil" goodLabel="Buena"
					strongLabel="Fuerte" autocomplete="new-password" required="true"
					requiredMessage="Confirme contraseña es obligatorio"
					value="#{cambiarClaveBean.passwordRepite}" />

			</p>
			<f:facet name="footer">
				<p:commandButton value="Aceptar" icon="pi pi-check"
					actionListener="#{cambiarClaveBean.changePassword()}"
					update="growl"
					process="@this txtPasswordActual txtPassword txtPasswordRepite" />

				<p:commandButton value="Cancelar" icon="pi pi-times"
					onclick="PF('dlgCambiarClave').hide()" class="ui-button-secondary"
					immediate="true" />
			</f:facet>
		</p:dialog>

	</h:form>
</h:body>
</html>
